<canvas id="videostream" width="840px" height="450px"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.min.js"></script>
<script>
    var img = document.getElementById('img'),
        socket = io('',{query:'link='+findGetParameter('link')});
    socket.on('data', function(data) {
  		try {
  	    var canvas = document.getElementById('videostream');
  	    var context = canvas.getContext('2d');
  	    var imageObj = new Image();
  	    imageObj.src = "data:image/jpeg;base64,"+data;
  	    imageObj.onload = function(){
  	      context.height = imageObj.height;
  	      context.width = imageObj.width;
  	      context.drawImage(imageObj,0,0,context.width,context.height);
  	    }
  	  } catch(e){ }
    });

    function findGetParameter(parameterName) {
    var result = null,
        tmp = [];
    var items = location.search.substr(1).split("&");
    for (var index = 0; index < items.length; index++) {
        tmp = items[index].split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
    }
    return result;
}
</script>
